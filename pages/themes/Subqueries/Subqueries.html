<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Subqueries</title>
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
	<link rel="icon" type="image/x-icon" href="../../../outfit/images/favicons/mysql_logo.png">
	<!-- css & themes include -->
	<link rel="stylesheet" href="../../../lib/reveal.js/css/reveal.css">
	<link rel="stylesheet" href="../../../outfit/css/themes/light.css" id="theme">
	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement( 'link' );
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match( /print-pdf/gi ) ? '../../../lib/reveal.js/css/print/pdf.css' : '../../../lib/reveal.js/css/print/paper.css';
		document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>
	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
	<!-- custom -->
	<link rel="stylesheet" href="../../../outfit/css/reveal.js.css">
	<base target="_blank">
</head>
<body>
	<div class="reveal default center" data-transition-speed="default" data-background-transition="default">
		<div class="top_links">
			<a class="home_link" href="../../../index.html#Subqueries" target="_top"><i class="fa fa-home"></i></a>
			<span class="help_link"><i class="fa fa-question"></i></span>
			<div class="help_text">
				<div class="note">Keyboard shortcuts:</div>
				<div><span>N/Спейс</span><span>Next Slide</span></div>
				<div><span>P</span><span>Previous Slide</span></div>
				<div><span>O</span><span>Slides Overview</span></div>
				<div><span>ctrl+left click</span><span>Zoom Element</span></div>
				<div class="print-howto"><br>If you want print version => add '<code>?print-pdf</code>' <br> at the end of slides URL (remove '#' fragment) and then print. <br>
				Like: https://wwwcourses.github.io/...CourseIntro.html?print-pdf </div>
			</div>
		</div>
		<div class="footer theme_switch">
			<a href="#" onclick="document.getElementById('theme').setAttribute('href','../../../outfit/css/themes/dark.css'); return false;">Dark</a>
			<a href="#" onclick="document.getElementById('theme').setAttribute('href','../../../outfit/css/themes/light.css'); return false;">Light</a>
			<!-- <a href="#" onclick="document.getElementById('theme').setAttribute('href','../../../outfit/css/themes/projector.css'); return false;">Projector</a> -->
		</div>
		<div class="slides">
<!--
########################################################
##################### SLIDES START #####################
########################################################
-->
<section><h1>Вложени SELECT операции (Subqueries)</h1></section>
<section data-transition="zoom">
	<section>
		<div class="copyright">
			<div class="note">
				<p>Created for</p>
			</div>
			<div class="company">
				<a href="https://progressbg.net/javascript-advanced-with-reactjs/">
				<img src="../../../outfit/images/logos/ProgressBG_logo_529_127.png" alt="ProgressBG_logo">
				</a>
			</div>
		</div>
	</section>
	<section class="copyright" data-transition="zoom" style="margin-top: -2em;">
		<div class="note">
			<p>Created by</p>
		</div>
		<div class="company">
		   <div class="LI-profile-badge"  data-version="v1" data-size="large" data-locale="en_US" data-type="vertical" data-theme="dark" data-vanity="ivapopova"><a class="LI-simple-link" href="https://bg.linkedin.com/in/ivapopova?trk=profile-badge">Iva E. Popova</a></div>
		</div>
		<!-- <div class="author">
			<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
		</div> -->
	</section>
</section>


<section data-min="5"><h1>Overview</h1></section>
<section><h2>Overview</h2>
  	<section>
		<dl class="fa">
			<dt>A subquery is a SQL query nested inside a larger query.</dt>
			<dt>Using subqueries in a query helps <span class="note">to isolate each part of a statement</span>.</dt>
			<dt>They provide alternative ways to perform operations that would otherwise require complex joins and unions.</dt>
			<dt>In MySQL subquery can be nested inside a SELECT, INSERT, UPDATE, DELETE, SET, or DO statement or inside another subquery</dt>
			<dt>A subquery is usually added within the WHERE Clause of another SQL SELECT statement.</dt>
			<a href="./images/sub_query.gif"><img src="./images/sub_query.gif" alt="sub_query.gif" style="height: 30vh;"></a>
			<dt class="note">The subquery (inner query) executes once before the main query (outer query) executes.</dt>
			<dt>The outer query uses the subquery result.</dt>

		</dl>
  	</section>
	<section><h3>Syntax</h3>
		<dl class="fa">
			<dt>Here is an example statement that shows the major points about subquery syntax as specified by the SQL standard and supported in MySQL:</dt>
			<pre><code rel="MySQL" class="sql">
				DELETE FROM t1
				WHERE s11 > ANY
				(SELECT COUNT(*) FROM t2
					WHERE NOT EXISTS
						(SELECT * FROM t3
							WHERE ROW(5*t2.s1,77)=
								(SELECT 50,11*s1 FROM t4 UNION SELECT 50,77 FROM
									(SELECT * FROM t5) AS t5)));
			</code></pre>
			<dt>A subquery can be used almost anywhere that <a href="https://dev.mysql.com/doc/refman/8.0/en/expressions.html">expression</a> is used and <span class="note">must be closed in parentheses</span></dt>

		</dl>
	</section>
	<section><h3>Subqueries types</h3>
		<dl class="fa">
			<dt>A subquery can  return:</dt>
			<dd>scalar (a single value)</dd>
			<dd>single row</dd>
			<dd>single column</dd>
			<dd>table (one or more rows of one or more columns)</dd>
			<dt>These are called scalar, column, row, and table subqueries.</dt>
		</dl>
	</section>
	<section><h3>Example - Scalar Subquery</h3>
		<dl class="fa">
			<dt>A scalar subquery is a subquery that <span class="note">returns exactly one value</span>.</dt>
			<dt>We can use it almost anywhere a single column value or literal is legal. But you can't use it in LIMIT or LOAD DATA statements.</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT *
				FROM books
				WHERE author_id = (
					SELECT id FROM authors WHERE lname='Adams'
				);
			</code></pre>
		</dl>
	</section>
</section>

<section data-min="50"><h1>Subqueries in Comparison Operators</h1></section>
<section><h2>Subqueries in Comparison Operators</h2>
	<section><h3>Comparison Operators: Overview</h3>
		<dl class="fa">
			<dt>Comparison Operators are use to compare values or rows.</dt>
			<dt>MySQL supports many <a href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html">Comparison Operators and Functions</a>, like:</dt>
			<br>
			<table frame="box" rules="all" summary="A reference that lists comparison operators."><colgroup><col style="width: 28%"><col style="width: 71%"></colgroup><thead><tr><th>Name</th>
			<th>Description</th>
			</tr></thead><tbody><tr><td><a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_greater-than"><code class="literal">&gt;</code></a></td>
			<td>
					Greater than operator
				</td>
			</tr><tr><td><a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a></td>
			<td>
					Greater than or equal operator
				</td>
			</tr><tr><td><a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_less-than"><code class="literal">&lt;</code></a></td>
			<td>
					Less than operator
				</td>
			</tr><tr><td><a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_not-equal"><code class="literal">&lt;&gt;</code>, <code class="literal">!=</code></a></td>
			<td>
					Not equal operator
				</td>
			</tr><tr><td><a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a></td>
			<td>
					Less than or equal operator
				</td>
			</tr><tr><td><a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a></td>
			<td>
					NULL-safe equal to operator
				</td>
			</tr><tr><td><a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_equal"><code class="literal">=</code></a></td>
			<td>
					Equal operator
				</td>
			</tr>
			<tr><td><a class="link" href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_between"><code class="literal">BETWEEN ... AND ...</code></a></td>
				<td>
					  Whether a value is within a range of values
					</td>
				</tr>

			</tbody></table>


			<dt>Comparison operations result in a value of 1 (TRUE), 0 (FALSE), or NULL.</dt>
			<dt>These operations work for both numbers and strings. Strings are automatically converted to numbers and numbers to strings as necessary.</dt>
		</dl>
	</section>
	<section><h3>Comparison Operators: Examples</h3>
		<dl class="fa">
			<dt>Let's have next table</dt>
			<pre><code rel="Sales" class="sql" style="min-width: 30vw;">
				+----+------------+---------------+
				| id | cost_price | selling_price |
				+----+------------+---------------+
				| 1  | 100        | 115           |
				| 2  | 50         | 45            |
				| 3  | 200        | 200           |
				| 4  | 50         | 100           |
				+----+------------+---------------+
			</code></pre>
			<dt>Select rows for which there is no profit:</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT *
				FROM sales
				WHERE cost_price>=selling_price;

				+----+------------+---------------+
				| id | cost_price | selling_price |
				+----+------------+---------------+
				| 2  | 50         | 45            |
				| 3  | 200        | 200           |
				+----+------------+---------------+

			</code></pre>
			<dt>Select rows for which the profit is bigger that 20:</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT *
				FROM sales
				WHERE selling_price - cost_price>20;

				+----+------------+---------------+
				| id | cost_price | selling_price |
				+----+------------+---------------+
				| 4  | 50         | 100           |
				+----+------------+---------------+
			</code></pre>
		</dl>
	</section>
	<section><h3>Syntax</h3>
		<dl class="fa">
			<dt>The most common use of a subquery is in the form:</dt>
			<pre><code rel="Syntax" class="sql" data-noescape>
				<i>operand1</i> <i>comparison_operator</i> (subquery)
			</code></pre>
			<dt>Where:</dt>
			<dd><i>operand1</i> - can not be a subquery</dd>
			<dd><i>comparison_operator</i> is any of: <code>LIKE =  >  <  >=  <=  <>  !=  <=></code></dd>
			<dt>Consider next example which finds all the rows in table t1 for which the column1 value is equal to a maximum value in table t2. This can not be done with JOIN:</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT * FROM t1
				WHERE column1 = (
					SELECT MAX(column2) FROM t2
				);
			</code></pre>
		</dl>
	</section>
</section>

<section data-min="50"><h1>Subqueries with ANY, ALL, IN, SOME</h1></section>
<section><h2>Subqueries with ANY, ALL, IN, SOME</h2>
	<section><h3>Subqueries with ANY</h3>
		<pre><code rel="Syntax" class="sql">
			operand comparison_operator ANY (subquery)
		</code></pre>
		<dl class="fa">
			<dt>The ANY keyword must follow the comparison operator.</dt>
			<dt>It return TRUE if the comparison is TRUE for ANY of the values in the column that the subquery returns</dt>
		</dl>
	</section>
	<section><h3>Subqueries with ANY: Example</h3>
		<dl class="fa">
			<dt>Let's have next tables:</dt>
			<div style="display: flex; gap:1em;">
				<pre><code rel="t1" class="sql">
					+----+
					| c1 |
					+----+
					| 1  |
					| 2  |
					| 3  |
					| 8  |
					+----+
				</code></pre>
				<pre><code rel="t2" class="sql">
					+----+
					| c2 |
					+----+
					| 1  |
					| 4  |
					| 5  |
					| 6  |
					+----+
				</code></pre>
			</div>
			<dt>Let's find values in t1.c1 which are bigger than ANY value in t2.c2</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT *
				FROM t1
				WHERE c1 > ANY (
					SELECT c2 FROM t2
				);
			</code></pre>
			<pre><code rel="Output" class="bash">
				+----+
				| c1 |
				+----+
				| 2  |
				| 3  |
				| 8  |
				+----+
			</code></pre>
		</dl>
	</section>
	<section><h3>Subqueries with ANY: Example (books)</h3>
		<dl class="fa">
			<dt>Find authors who published books after 1950</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT *
				FROM authors as a
				WHERE a.id = ANY(
					SELECT b.author_id FROM books as b
					WHERE b.pub_year>1950
				);
			</code></pre>
			<pre><code rel="Output" class="bash">
				+----+---------+----------+------------+------------+
				| id | fname   | lname    | birth_year | death_year |
				+----+---------+----------+------------+------------+
				| 1  | Kurt    | Vonnegut | 1922       | 2007       |
				| 2  | Douglas | Adams    | 1952       | 2001       |
				+----+---------+----------+------------+------------+
			</code></pre>
			<dt>Note, that the results retrieved are not the same as with:</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT *
				FROM authors AS a
				JOIN books AS b ON a.id=b.author_id
				WHERE b.pub_year>1950;
			</code></pre>
		</dl>
	</section>
	<section><h3>ANY vs IN</h3>
		<dl class="fa">
			<dt><a href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_in">IN</a> is semantically equivalent to <code>= ANY</code>, but <span class="note">IN can take an expression list, while ANY cannot</span>.</dt>
			<dt>When IN is used with with a subquery it is an alias for <code>= ANY</code></dt>
			<dt>Next two queries are equivalent:</dt>
			<div style="display: flex;gap:1em">
				<pre><code rel="IN" class="sql">
					SELECT *
					FROM t1
					WHERE c1 IN (
						SELECT c2 FROM t2
					);
				</code></pre>
				<pre><code rel="ANY" class="sql">
					SELECT *
					FROM t1
					WHERE c1 = ANY (
						SELECT c2 FROM t2
					);
				</code></pre>
			</div>
			<hr>
			<dt>Also, <code>NOT IN</code> is not an alias for <code>&lt;&gt; ANY</code>, but for <code>&lt;&gt; ALL</code>. </dt>
			<dt>Not that next 2 queries retrieve different results:</dt>
			<div style="display: flex; gap:1em">
				<pre><code rel="MySQL" class="sql">
					SELECT *
					FROM t1
					WHERE c1 NOT IN (
						SELECT c2 FROM t2
					);

					+----+
					| c1 |
					+----+
					| 2  |
					| 3  |
					| 8  |
					+----+
				</code></pre>
				<pre><code rel="MySQL" class="sql">
					SELECT *
					FROM t1
					WHERE c1 <> ANY (
						SELECT c2 FROM t2
					);

					+----+
					| c1 |
					+----+
					| 1  |
					| 2  |
					| 3  |
					| 8  |
					+----+
				</code></pre>
			</div>
		</dl>
	</section>
	<section><h3>ANY == SOME</h3>
		<dl class="fa">
			<dt>In MySQL <code>SOME</code> is an alias for <code>ANY</code></dt>
			<dt>Word <code>SOME</code> is most close to natural languages semantics in next queries:</dt>
			<div style="display: flex; gap:1em">
				<pre><code rel="MySQL" class="sql">
					SELECT *
					FROM t1
					WHERE c1 <> ANY (
						SELECT c2 FROM t2
					);
				</code></pre>
				<pre><code rel="MySQL" class="sql">
					SELECT *
					FROM t1
					WHERE c1 <> SOME (
						SELECT c2 FROM t2
					);
				</code></pre>
			</div>
			<dt>both retrieving same results:</dt>
			<pre><code rel="Output" class="bash">
				+----+
				| c1 |
				+----+
				| 1  |
				| 2  |
				| 3  |
				| 8  |
				+----+
			</code></pre>
		</dl>
	</section>
	<section><h3>Subqueries with ALL</h3>
		<dl class="fa">
			<pre><code rel="Syntax" class="sql">
				operand comparison_operator ALL (subquery)
			</code></pre>
			<dt>The word ALL, which must follow a comparison operator.</dt>
			<dt>It means "return TRUE if the comparison is TRUE for ALL of the values in the column that the subquery returns"</dt>
		</dl>
	</section>
	<section><h3>Subqueries with ALL: Example</h3>
		<dl class="fa">
			<dt>Let's have next tables:</dt>
			<div style="display: flex; gap:1em;">
				<pre><code rel="t1" class="sql">
					+----+
					| c1 |
					+----+
					| 1  |
					| 2  |
					| 3  |
					| 8  |
					+----+
				</code></pre>
				<pre><code rel="t2" class="sql">
					+----+
					| c2 |
					+----+
					| 1  |
					| 4  |
					| 5  |
					| 6  |
					+----+
				</code></pre>
			</div>
			<dt>Let's find values in t1.c1 which are different than ANY value in t2.c2</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT *
				FROM t1
				WHERE c1 <> ALL (
					SELECT c2 FROM t2
				);
			</code></pre>
			<pre><code rel="Output" class="bash">
				+----+
				| c1 |
				+----+
				| 2  |
				| 3  |
				| 8  |
				+----+
			</code></pre>
		</dl>
	</section>
</section>

<section data-min="50"><h1>Row Subqueries</h1></section>
<section><h2>Row Subqueries</h2>
	<section><h3>Overview</h3>
		<dl class="fa">
			<dt>Remember, that:</dt>
			<dd>Scalar subqueries return a single value.</dd>
			<dd>Column subqueries return a column of values.</dd>
			<dt>A row subquery is a subquery that <span class="note">returns a single row</span> and can thus return more than one column value</dt>
			<dt>Row subqueries can be used with: <code>=  >  <  >=  <=  <>  !=  <=></code> operators.</dt>
		</dl>
	</section>
	<section><h3>Example</h3>
		<dl class="fa">
			<dt>Let's have next tables:</dt>
			<div style="display: flex; gap:1em">
				<pre><code rel="a" class="sql">
					+----+----+
					| c1 | c2 |
					+----+----+
					| 1  | 2  |
					| 2  | 1  |
					| 3  | 4  |
					| 8  | 2  |
					+----+----+
				</code></pre>
				<pre><code rel="b" class="sql">
					+----+----+
					| c3 | c4 |
					+----+----+
					| 1  | 2  |
					| 4  | 1  |
					| 5  | 3  |
					| 8  | 2  |
					+----+----+
				</code></pre>
			</div>
			<dt>Let's find rows in <b>a</b> which match a row in <b>b</b> for which c3 value is 1</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT * FROM a
				WHERE (c1,c2) = (SELECT c3, c4 FROM b WHERE c3=1);
			</code></pre>
			<pre><code rel="Output" class="bash">
				+----+----+
				| c1 | c2 |
				+----+----+
				| 1  | 2  |
				+----+----+
			</code></pre>
		</dl>
	</section>
	<section><h3>ROW constructor</h3>
		<dl class="fa">
			<dt>A row constructor is used for comparisons with subqueries that return two or more columns</dt>
			<pre><code rel="Syntax" class="sql">
				ROW(col1,col2, ..., colN)

				-- which is equivalent to

				(col1,col2, ..., colN)
			</code></pre>
			<dt>ROW constructors are useful in next case:</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT * FROM t1 WHERE (column1,column2) = (1,1);

				-- which is equivalent to

				SELECT * FROM t1 WHERE column1 = 1 AND column2 = 1;
			</code></pre>
		</dl>
	</section>
</section>

<section data-min="50"><h1>Subqueries with EXISTS or NOT EXISTS</h1></section>
<section><h2>Subqueries with EXISTS or NOT EXISTS</h2>
	<section><h3>Overview</h3>
		<dl class="fa">
			<dt>When a subquery is used with the EXISTS or NOT EXISTS operator, a subquery returns a Boolean value of TRUE or FALSE</dt>
			<dt>If a subquery returns any rows at all, EXISTS subquery is TRUE, and NOT EXISTS subquery is FALSE.</dt>
			<pre><code rel="Syntax" class="sql">
				SELECT * FROM table WHERE EXISTS (subquery);

				SELECT * FROM table WHERE NOT EXISTS (subquery);
			</code></pre>
			<dt>Usually EXISTS subquery is of the form <code>SELECT * FROM <i>table</i></code>, but MySQL ignores the SELECT list in such a subquery, so it makes no difference if we write <code>SELECT 42 FROM <i>table</i></code></dt>
			<dt>Example: find authors who have published books after 1950 year:</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT a.fname,a.lname
				FROM authors AS a
				WHERE EXISTS (
					SELECT * FROM books AS b
					WHERE pub_year>1950 AND a.id=b.author_id
				);
			</code></pre>
			<pre><code rel="Output" class="bash">
				+---------+----------+
				| fname   | lname    |
				+---------+----------+
				| Kurt    | Vonnegut |
				| Douglas | Adams    |
				+---------+----------+
			</code></pre>
		</dl>
	</section>
	<section><h3>Examples</h3>
		<dl class="fa">
			<dt>Let's have next tables:</dt>
			<div style="display: flex; gap: 1em; width: 60vw;">
				<pre><code rel="users" class="sql">
					+----+-------+
					| id | name  |
					+----+-------+
					| 1  | Ivan  |
					| 2  | John  |
					| 3  | Merry |
					| 4  | Pesho |
					+----+-------+
				</code></pre>
				<pre><code rel="addresses" class="sql">
					+----+---------+----------+
					| id | user_id | city     |
					+----+---------+----------+
					| 1  | 1       | Sofia    |
					| 2  | 3       | Paris    |
					| 3  | 1       | Lodon    |
					| 4  | &lt;null&gt;  | New York |
					+----+---------+----------+
				</code></pre>
			</div>
			<dt>Find users who have address records:</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT u.name
				FROM users AS u
				WHERE EXISTS (
					SELECT * FROM addresses AS a
					WHERE u.id=a.user_id
				);

				-- Result: Ivan, Merry
			</code></pre>
			<dt>Find users who doesn't have any address records</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT u.nane
				FROM users AS u
				WHERE NOT EXISTS (
					SELECT * FROM addresses AS a
					WHERE u.id=a.user_id
				);


				-- Result: John, Pesho
			</code></pre>
		</dl>
	</section>
</section>

<section data-min="50"><h1>Correlated Subqueries</h1></section>
<section><h2>Correlated Subqueries</h2>
	<section><h3></h3>
		<dl class="fa">
			<dt>A correlated subquery is a subquery that uses the data from the outer query.</dt>
			<dt>A correlated subquery can not be executed as a standalone query</dt>
			<dt>A <span class="note">correlated subquery is evaluated once for each row in the outer query</span>.</dt>
			<dt>Correlated queries are more efficient than JOINS or VIEWS <span class="note">only if either the outer or inner query returns a small records</span>. Otherwise => use JOINS or VIEWS.</dt>
			<dt>Example:</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT *
				FROM users AS u
				WHERE NOT EXISTS (
					SELECT * FROM addresses AS a
					WHERE u.id=a.user_id
				);
			</code></pre>
		</dl>
	</section>
</section>

<section data-min="50"><h1>Subquery in the FROM clause</h1></section>
<section><h2>Subquery in the FROM clause</h2>
	<section><h3>Overview</h3>
		<dl class="fa">
			<dt>When you use a subquery in the FROM clause, the result set returned from a subquery is used as a temporary table.</dt>
			<dt>Consider next standard query:</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT author_id, COUNT(author_id) as book_count FROM books AS b
				GROUP BY b.author_id;

				-- OUTPUT:
				+-----------+------------+
				| author_id | book_count |
				+-----------+------------+
				| 1         | 6          |
				| 2         | 8          |
				| 3         | 21         |
				+-----------+------------+
			</code></pre>
			<dt>We can select MAX(book_count) if we use it as a subquery in FROM:</dt>
			<pre><code rel="MySQL" class="sql">
				SELECT MAX(t.book_count) AS max_book_count
				FROM (
					SELECT author_id, COUNT(author_id) as book_count FROM books AS b
						GROUP BY b.author_id
				) as t;

				+----------------+
				| max_book_count |
				+----------------+
				| 21             |
				+----------------+

			</code></pre>
		</dl>
	</section>
	<section><h3>Notes</h3>
		<dl class="fa">
			<dt>Using subquery in FROM clause should generally be avoided if you can rewrite your query in a different way. Some of the reasons are:</dt>
			<dd>No indexes can be used on a table returned by subquery in FROM, i.e. a temporary table in memory</dd>
			<dd>A subquery in the FROM clause can't be correlated subquery as it can't be evaluated per row of the outer query.</dd>
		</dl>
	</section>
</section>


<!-- <section data-min="1" id='hw'><h1>Exercises</h1></section>
<section><h2>Task1: __task_title__</h2>
  <section><h3>__task_description__</h3>
  	<dl class="fa">
  		<dt></dt>
  	</dl>
  </section>
</section> -->

<section class="disclaimer" data-background="../../../outfit/images/for_slides/the_end_on_sand.jpg">
	 <p>These slides are based on</p>
	 <p>customised version of </p>
	 <p><a href="http://hakim.se/">Hakimel</a>'s <a href="http://lab.hakim.se/reveal-js">reveal.js</a></p>
	 <p>framework</p>
</section>
<!--
########################################################
##################### SLIDES END   #####################
########################################################
-->
		</div>
	</div>
	<!-- Custom processing -->
	<script src="../../../outfit/js/slides.js"></script>
	<!-- external scripts -->
	<script src="../../../lib/reveal.js/lib/js/head.min.js"></script>
	<script src="../../../lib/reveal.js/js/reveal.js"></script>
	<!-- init reveal -->
	<script>
		// Full list of configuration options available at:
		// https://github.com/hakimel/reveal.js#configuration
		var highlightjsTabSize = '  ';
		Reveal.initialize({
			controls: true,
			progress: true,
			slideNumber: 'c/t',
			keyboard: true,
			history: true,
			center: true,
			width: '90%',
			height: '100%',
			// slide transition
			transition: 'concave', // none/fade/slide/convex/concave/zoom
			// Factor of the display size that should remain empty around the content
			margin: 0.1,
			// shift+maous click to zoom in/out element
			zoomKey: 'ctrl',
			// theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
			// transition: Reveal.getQueryHash().transition || 'default'
			// Optional reveal.js plugins
			dependencies: [
				{ src: '../../../lib/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
				{ src: '../../../lib/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: '../../../lib/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: '../../../lib/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.configure({tabReplace: highlightjsTabSize}); hljs.initHighlightingOnLoad(); } },
				{ src: '../../../lib/reveal.js/plugin/zoom-js/zoom.js', async: true },
				{ src: '../../../lib/reveal.js/plugin/notes/notes.js', async: true }
			]
		});
	</script>
	<!-- linkedin badge -->

</body>
</html>
